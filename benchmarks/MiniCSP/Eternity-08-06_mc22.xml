<instance format="XCSP3" type="CSP">
  <variables>
    <array id="x" note="x[i][j] is the index of the piece at row i and column j" size="[8][6]"> 0..47 </array>
    <array id="t" note="t[i][j] is the value at the top of the piece at row i and column j" size="[9][6]"> 0..9 </array>
    <array id="l" note="l[i][j] is the value at the left of the piece at row i and column j" size="[8][7]"> 0..9 </array>
  </variables>
  <constraints>
    <allDifferent note="all pieces must be placed (only once)"> x[][] </allDifferent>
    <group note="all pieces must be valid (i.e., must correspond to those given initially, possibly after applying some rotation)">
      <extension>
        <list> %... </list>
        <supports> (0,0,0,1,2)(0,0,1,2,0)(0,1,2,0,0)(0,2,0,0,1)(1,0,0,2,1)(1,0,2,1,0)(1,1,0,0,2)(1,2,1,0,0)(2,0,0,3,1)(2,0,3,1,0)(2,1,0,0,3)(2,3,1,0,0)(3,0,0,3,3)(3,0,3,3,0)(3,3,0,0,3)(3,3,3,0,0)(4,0,1,4,3)(4,1,4,3,0)(4,3,0,1,4)(4,4,3,0,1)(5,0,1,5,2)(5,1,5,2,0)(5,2,0,1,5)(5,5,2,0,1)(6,0,1,5,3)(6,1,5,3,0)(6,3,0,1,5)(6,5,3,0,1)(7,0,1,6,3)(7,1,6,3,0)(7,3,0,1,6)(7,6,3,0,1)(8,0,1,7,3)(8,1,7,3,0)(8,3,0,1,7)(8,7,3,0,1)(9,0,1,8,2)(9,1,8,2,0)(9,2,0,1,8)(9,8,2,0,1)(10,0,1,9,3)(10,1,9,3,0)(10,3,0,1,9)(10,9,3,0,1)(11,0,2,4,3)(11,2,4,3,0)(11,3,0,2,4)(11,4,3,0,2)(12,0,2,6,1)(12,1,0,2,6)(12,2,6,1,0)(12,6,1,0,2)(13,0,2,6,2)(13,2,0,2,6)(13,2,6,2,0)(13,6,2,0,2)(14,0,2,6,3)(14,2,6,3,0)(14,3,0,2,6)(14,6,3,0,2)(15,0,2,7,1)(15,1,0,2,7)(15,2,7,1,0)(15,7,1,0,2)(16,0,2,7,2)(16,2,0,2,7)(16,2,7,2,0)(16,7,2,0,2)(17,0,2,9,1)(17,1,0,2,9)(17,2,9,1,0)(17,9,1,0,2)(18,0,3,4,2)(18,2,0,3,4)(18,3,4,2,0)(18,4,2,0,3)(19,0,3,5,1)(19,1,0,3,5)(19,3,5,1,0)(19,5,1,0,3)(20,0,3,5,2)(20,2,0,3,5)(20,3,5,2,0)(20,5,2,0,3)(21,0,3,6,1)(21,1,0,3,6)(21,3,6,1,0)(21,6,1,0,3)(22,0,3,7,2)(22,2,0,3,7)(22,3,7,2,0)(22,7,2,0,3)(23,0,3,8,1)(23,1,0,3,8)(23,3,8,1,0)(23,8,1,0,3)(24,4,4,4,6)(24,4,4,6,4)(24,4,6,4,4)(24,6,4,4,4)(25,4,4,4,9)(25,4,4,9,4)(25,4,9,4,4)(25,9,4,4,4)(26,4,5,4,6)(26,4,6,4,5)(26,5,4,6,4)(26,6,4,5,4)(27,4,5,8,6)(27,5,8,6,4)(27,6,4,5,8)(27,8,6,4,5)(28,4,6,8,7)(28,6,8,7,4)(28,7,4,6,8)(28,8,7,4,6)(29,4,7,4,9)(29,4,9,4,7)(29,7,4,9,4)(29,9,4,7,4)(30,4,7,9,8)(30,7,9,8,4)(30,8,4,7,9)(30,9,8,4,7)(31,4,7,9,9)(31,7,9,9,4)(31,9,4,7,9)(31,9,9,4,7)(32,4,8,7,5)(32,5,4,8,7)(32,7,5,4,8)(32,8,7,5,4)(33,4,8,7,8)(33,7,8,4,8)(33,8,4,8,7)(33,8,7,8,4)(34,4,9,6,5)(34,5,4,9,6)(34,6,5,4,9)(34,9,6,5,4)(35,5,5,5,8)(35,5,5,8,5)(35,5,8,5,5)(35,8,5,5,5)(36,5,5,5,9)(36,5,5,9,5)(36,5,9,5,5)(36,9,5,5,5)(37,5,5,6,7)(37,5,6,7,5)(37,6,7,5,5)(37,7,5,5,6)(38,5,6,8,7)(38,6,8,7,5)(38,7,5,6,8)(38,8,7,5,6)(39,5,7,6,9)(39,6,9,5,7)(39,7,6,9,5)(39,9,5,7,6)(40,5,9,8,8)(40,8,5,9,8)(40,8,8,5,9)(40,9,8,8,5)(41,5,9,9,9)(41,9,5,9,9)(41,9,9,5,9)(41,9,9,9,5)(42,6,6,6,9)(42,6,6,9,6)(42,6,9,6,6)(42,9,6,6,6)(43,6,6,8,8)(43,6,8,8,6)(43,8,6,6,8)(43,8,8,6,6)(44,6,8,7,9)(44,7,9,6,8)(44,8,7,9,6)(44,9,6,8,7)(45,6,8,9,7)(45,7,6,8,9)(45,8,9,7,6)(45,9,7,6,8)(46,7,7,7,8)(46,7,7,8,7)(46,7,8,7,7)(46,8,7,7,7)(47,7,8,7,9)(47,7,9,7,8)(47,8,7,9,7)(47,9,7,8,7) </supports>
      </extension>
      <args> x[0][0] t[0][0] l[0][1] t[1][0] l[0][0] </args>
      <args> x[0][1] t[0][1] l[0][2] t[1][1] l[0][1] </args>
      <args> x[0][2] t[0][2] l[0][3] t[1][2] l[0][2] </args>
      <args> x[0][3] t[0][3] l[0][4] t[1][3] l[0][3] </args>
      <args> x[0][4] t[0][4] l[0][5] t[1][4] l[0][4] </args>
      <args> x[0][5] t[0][5] l[0][6] t[1][5] l[0][5] </args>
      <args> x[1][0] t[1][0] l[1][1] t[2][0] l[1][0] </args>
      <args> x[1][1] t[1][1] l[1][2] t[2][1] l[1][1] </args>
      <args> x[1][2] t[1][2] l[1][3] t[2][2] l[1][2] </args>
      <args> x[1][3] t[1][3] l[1][4] t[2][3] l[1][3] </args>
      <args> x[1][4] t[1][4] l[1][5] t[2][4] l[1][4] </args>
      <args> x[1][5] t[1][5] l[1][6] t[2][5] l[1][5] </args>
      <args> x[2][0] t[2][0] l[2][1] t[3][0] l[2][0] </args>
      <args> x[2][1] t[2][1] l[2][2] t[3][1] l[2][1] </args>
      <args> x[2][2] t[2][2] l[2][3] t[3][2] l[2][2] </args>
      <args> x[2][3] t[2][3] l[2][4] t[3][3] l[2][3] </args>
      <args> x[2][4] t[2][4] l[2][5] t[3][4] l[2][4] </args>
      <args> x[2][5] t[2][5] l[2][6] t[3][5] l[2][5] </args>
      <args> x[3][0] t[3][0] l[3][1] t[4][0] l[3][0] </args>
      <args> x[3][1] t[3][1] l[3][2] t[4][1] l[3][1] </args>
      <args> x[3][2] t[3][2] l[3][3] t[4][2] l[3][2] </args>
      <args> x[3][3] t[3][3] l[3][4] t[4][3] l[3][3] </args>
      <args> x[3][4] t[3][4] l[3][5] t[4][4] l[3][4] </args>
      <args> x[3][5] t[3][5] l[3][6] t[4][5] l[3][5] </args>
      <args> x[4][0] t[4][0] l[4][1] t[5][0] l[4][0] </args>
      <args> x[4][1] t[4][1] l[4][2] t[5][1] l[4][1] </args>
      <args> x[4][2] t[4][2] l[4][3] t[5][2] l[4][2] </args>
      <args> x[4][3] t[4][3] l[4][4] t[5][3] l[4][3] </args>
      <args> x[4][4] t[4][4] l[4][5] t[5][4] l[4][4] </args>
      <args> x[4][5] t[4][5] l[4][6] t[5][5] l[4][5] </args>
      <args> x[5][0] t[5][0] l[5][1] t[6][0] l[5][0] </args>
      <args> x[5][1] t[5][1] l[5][2] t[6][1] l[5][1] </args>
      <args> x[5][2] t[5][2] l[5][3] t[6][2] l[5][2] </args>
      <args> x[5][3] t[5][3] l[5][4] t[6][3] l[5][3] </args>
      <args> x[5][4] t[5][4] l[5][5] t[6][4] l[5][4] </args>
      <args> x[5][5] t[5][5] l[5][6] t[6][5] l[5][5] </args>
      <args> x[6][0] t[6][0] l[6][1] t[7][0] l[6][0] </args>
      <args> x[6][1] t[6][1] l[6][2] t[7][1] l[6][1] </args>
      <args> x[6][2] t[6][2] l[6][3] t[7][2] l[6][2] </args>
      <args> x[6][3] t[6][3] l[6][4] t[7][3] l[6][3] </args>
      <args> x[6][4] t[6][4] l[6][5] t[7][4] l[6][4] </args>
      <args> x[6][5] t[6][5] l[6][6] t[7][5] l[6][5] </args>
      <args> x[7][0] t[7][0] l[7][1] t[8][0] l[7][0] </args>
      <args> x[7][1] t[7][1] l[7][2] t[8][1] l[7][1] </args>
      <args> x[7][2] t[7][2] l[7][3] t[8][2] l[7][2] </args>
      <args> x[7][3] t[7][3] l[7][4] t[8][3] l[7][3] </args>
      <args> x[7][4] t[7][4] l[7][5] t[8][4] l[7][4] </args>
      <args> x[7][5] t[7][5] l[7][6] t[8][5] l[7][5] </args>
    </group>
    <group note="putting special value 0 on borders">
      <intension> eq(%0,0) </intension>
      <args> t[0][0] </args>
      <args> t[0][1] </args>
      <args> t[0][2] </args>
      <args> t[0][3] </args>
      <args> t[0][4] </args>
      <args> t[0][5] </args>
      <args> l[0][6] </args>
      <args> l[1][6] </args>
      <args> l[2][6] </args>
      <args> l[3][6] </args>
      <args> l[4][6] </args>
      <args> l[5][6] </args>
      <args> l[6][6] </args>
      <args> l[7][6] </args>
      <args> t[8][0] </args>
      <args> t[8][1] </args>
      <args> t[8][2] </args>
      <args> t[8][3] </args>
      <args> t[8][4] </args>
      <args> t[8][5] </args>
      <args> l[0][0] </args>
      <args> l[1][0] </args>
      <args> l[2][0] </args>
      <args> l[3][0] </args>
      <args> l[4][0] </args>
      <args> l[5][0] </args>
      <args> l[6][0] </args>
      <args> l[7][0] </args>
    </group>
  </constraints>
</instance>

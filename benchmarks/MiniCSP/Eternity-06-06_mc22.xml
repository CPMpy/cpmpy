<instance format="XCSP3" type="CSP">
  <variables>
    <array id="x" note="x[i][j] is the index of the piece at row i and column j" size="[6][6]"> 0..35 </array>
    <array id="t" note="t[i][j] is the value at the top of the piece at row i and column j" size="[7][6]"> 0..8 </array>
    <array id="l" note="l[i][j] is the value at the left of the piece at row i and column j" size="[6][7]"> 0..8 </array>
  </variables>
  <constraints>
    <allDifferent note="all pieces must be placed (only once)"> x[][] </allDifferent>
    <group note="all pieces must be valid (i.e., must correspond to those given initially, possibly after applying some rotation)">
      <extension>
        <list> %... </list>
        <supports> (0,0,0,1,1)(0,0,1,1,0)(0,1,0,0,1)(0,1,1,0,0)(1,0,0,1,3)(1,0,1,3,0)(1,1,3,0,0)(1,3,0,0,1)(2,0,0,2,2)(2,0,2,2,0)(2,2,0,0,2)(2,2,2,0,0)(3,0,0,2,3)(3,0,2,3,0)(3,2,3,0,0)(3,3,0,0,2)(4,0,1,6,1)(4,1,0,1,6)(4,1,6,1,0)(4,6,1,0,1)(5,0,1,6,2)(5,1,6,2,0)(5,2,0,1,6)(5,6,2,0,1)(6,0,1,8,1)(6,1,0,1,8)(6,1,8,1,0)(6,8,1,0,1)(7,0,1,8,2)(7,1,8,2,0)(7,2,0,1,8)(7,8,2,0,1)(8,0,1,8,3)(8,1,8,3,0)(8,3,0,1,8)(8,8,3,0,1)(9,0,2,4,1)(9,1,0,2,4)(9,2,4,1,0)(9,4,1,0,2)(10,0,2,5,1)(10,1,0,2,5)(10,2,5,1,0)(10,5,1,0,2)(11,0,2,6,2)(11,2,0,2,6)(11,2,6,2,0)(11,6,2,0,2)(12,0,2,6,3)(12,2,6,3,0)(12,3,0,2,6)(12,6,3,0,2)(13,0,2,7,3)(13,2,7,3,0)(13,3,0,2,7)(13,7,3,0,2)(14,0,3,4,2)(14,2,0,3,4)(14,3,4,2,0)(14,4,2,0,3)(15,0,3,4,3)(15,3,0,3,4)(15,3,4,3,0)(15,4,3,0,3)(16,0,3,5,1)(16,1,0,3,5)(16,3,5,1,0)(16,5,1,0,3)(17,0,3,6,2)(17,2,0,3,6)(17,3,6,2,0)(17,6,2,0,3)(18,0,3,7,1)(18,1,0,3,7)(18,3,7,1,0)(18,7,1,0,3)(19,0,3,8,2)(19,2,0,3,8)(19,3,8,2,0)(19,8,2,0,3)(20,4,4,7,5)(20,4,7,5,4)(20,5,4,4,7)(20,7,5,4,4)(21,4,5,5,5)(21,5,4,5,5)(21,5,5,4,5)(21,5,5,5,4)(22,4,5,8,8)(22,5,8,8,4)(22,8,4,5,8)(22,8,8,4,5)(23,4,6,6,7)(23,6,6,7,4)(23,6,7,4,6)(23,7,4,6,6)(24,4,6,7,8)(24,6,7,8,4)(24,7,8,4,6)(24,8,4,6,7)(25,4,7,6,5)(25,5,4,7,6)(25,6,5,4,7)(25,7,6,5,4)(26,4,7,7,5)(26,5,4,7,7)(26,7,5,4,7)(26,7,7,5,4)(27,4,7,7,7)(27,7,4,7,7)(27,7,7,4,7)(27,7,7,7,4)(28,4,8,5,6)(28,5,6,4,8)(28,6,4,8,5)(28,8,5,6,4)(29,4,8,5,7)(29,5,7,4,8)(29,7,4,8,5)(29,8,5,7,4)(30,4,8,7,6)(30,6,4,8,7)(30,7,6,4,8)(30,8,7,6,4)(31,4,8,7,8)(31,7,8,4,8)(31,8,4,8,7)(31,8,7,8,4)(32,5,6,5,7)(32,5,7,5,6)(32,6,5,7,5)(32,7,5,6,5)(33,5,6,6,8)(33,6,6,8,5)(33,6,8,5,6)(33,8,5,6,6)(34,5,6,7,8)(34,6,7,8,5)(34,7,8,5,6)(34,8,5,6,7)(35,5,8,6,8)(35,6,8,5,8)(35,8,5,8,6)(35,8,6,8,5) </supports>
      </extension>
      <args> x[0][0] t[0][0] l[0][1] t[1][0] l[0][0] </args>
      <args> x[0][1] t[0][1] l[0][2] t[1][1] l[0][1] </args>
      <args> x[0][2] t[0][2] l[0][3] t[1][2] l[0][2] </args>
      <args> x[0][3] t[0][3] l[0][4] t[1][3] l[0][3] </args>
      <args> x[0][4] t[0][4] l[0][5] t[1][4] l[0][4] </args>
      <args> x[0][5] t[0][5] l[0][6] t[1][5] l[0][5] </args>
      <args> x[1][0] t[1][0] l[1][1] t[2][0] l[1][0] </args>
      <args> x[1][1] t[1][1] l[1][2] t[2][1] l[1][1] </args>
      <args> x[1][2] t[1][2] l[1][3] t[2][2] l[1][2] </args>
      <args> x[1][3] t[1][3] l[1][4] t[2][3] l[1][3] </args>
      <args> x[1][4] t[1][4] l[1][5] t[2][4] l[1][4] </args>
      <args> x[1][5] t[1][5] l[1][6] t[2][5] l[1][5] </args>
      <args> x[2][0] t[2][0] l[2][1] t[3][0] l[2][0] </args>
      <args> x[2][1] t[2][1] l[2][2] t[3][1] l[2][1] </args>
      <args> x[2][2] t[2][2] l[2][3] t[3][2] l[2][2] </args>
      <args> x[2][3] t[2][3] l[2][4] t[3][3] l[2][3] </args>
      <args> x[2][4] t[2][4] l[2][5] t[3][4] l[2][4] </args>
      <args> x[2][5] t[2][5] l[2][6] t[3][5] l[2][5] </args>
      <args> x[3][0] t[3][0] l[3][1] t[4][0] l[3][0] </args>
      <args> x[3][1] t[3][1] l[3][2] t[4][1] l[3][1] </args>
      <args> x[3][2] t[3][2] l[3][3] t[4][2] l[3][2] </args>
      <args> x[3][3] t[3][3] l[3][4] t[4][3] l[3][3] </args>
      <args> x[3][4] t[3][4] l[3][5] t[4][4] l[3][4] </args>
      <args> x[3][5] t[3][5] l[3][6] t[4][5] l[3][5] </args>
      <args> x[4][0] t[4][0] l[4][1] t[5][0] l[4][0] </args>
      <args> x[4][1] t[4][1] l[4][2] t[5][1] l[4][1] </args>
      <args> x[4][2] t[4][2] l[4][3] t[5][2] l[4][2] </args>
      <args> x[4][3] t[4][3] l[4][4] t[5][3] l[4][3] </args>
      <args> x[4][4] t[4][4] l[4][5] t[5][4] l[4][4] </args>
      <args> x[4][5] t[4][5] l[4][6] t[5][5] l[4][5] </args>
      <args> x[5][0] t[5][0] l[5][1] t[6][0] l[5][0] </args>
      <args> x[5][1] t[5][1] l[5][2] t[6][1] l[5][1] </args>
      <args> x[5][2] t[5][2] l[5][3] t[6][2] l[5][2] </args>
      <args> x[5][3] t[5][3] l[5][4] t[6][3] l[5][3] </args>
      <args> x[5][4] t[5][4] l[5][5] t[6][4] l[5][4] </args>
      <args> x[5][5] t[5][5] l[5][6] t[6][5] l[5][5] </args>
    </group>
    <group note="putting special value 0 on borders">
      <intension> eq(%0,0) </intension>
      <args> t[0][0] </args>
      <args> t[0][1] </args>
      <args> t[0][2] </args>
      <args> t[0][3] </args>
      <args> t[0][4] </args>
      <args> t[0][5] </args>
      <args> l[0][6] </args>
      <args> l[1][6] </args>
      <args> l[2][6] </args>
      <args> l[3][6] </args>
      <args> l[4][6] </args>
      <args> l[5][6] </args>
      <args> t[6][0] </args>
      <args> t[6][1] </args>
      <args> t[6][2] </args>
      <args> t[6][3] </args>
      <args> t[6][4] </args>
      <args> t[6][5] </args>
      <args> l[0][0] </args>
      <args> l[1][0] </args>
      <args> l[2][0] </args>
      <args> l[3][0] </args>
      <args> l[4][0] </args>
      <args> l[5][0] </args>
    </group>
  </constraints>
</instance>
